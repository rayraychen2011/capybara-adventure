# 角色移動功能測試說明

## 功能概述

現在已經實現了完整的角色移動系統，包括：

1. **角色可以跑到地圖的任何角落** - 在小鎮的 30x30 街道網格中自由移動
2. **只能在道路上走，不能穿過建築物** - 添加了建築物碰撞檢測
3. **可以走出城門進入森林，再往前到達湖泊** - 完整的場景轉換路線

## 控制說明

### 移動控制

- **WASD** 或 **方向鍵**：控制角色移動
- **同時按住多個方向鍵**：可以斜向移動

### 功能按鍵

- **E** 或 **空白鍵**：互動
- **I** 或 **Tab**：打開背包
- **F**：釣魚（在湖泊場景的釣魚點）
- **G**：狩獵模式（在森林場景）
- **D**：開啟/關閉除錯模式（森林和湖泊場景）

## 測試步驟

### 1. 小鎮移動測試

#### 基本移動

1. 啟動遊戲後，角色會出現在小鎮中央
2. 使用 WASD 或方向鍵測試移動
3. 觀察小地圖（右上角）確認角色位置

#### 建築物碰撞測試

1. 嘗試走向任何建築物（棕色矩形）
2. **預期結果**：角色會被阻擋，無法穿過建築物
3. 只能在灰色道路上移動

#### 邊界測試

1. 走向小鎮邊緣
2. **預期結果**：角色被城牆（深棕色）阻擋，無法離開小鎮

#### 城門位置

- **西城門**：前往森林（綠色區域）
- **東城門**：前往湖泊（藍色區域）
- **南城門**：傳送回家（金色區域）

### 2. 場景轉換測試

#### 小鎮 → 森林

1. 走向西城門（綠色區域，標示「向西進入森林」）
2. **重要**：必須按住 **A 鍵或左方向鍵**（向西移動）進入區域
3. **預期結果**：自動切換到森林場景，角色出現在森林西側

#### 森林 → 湖泊

1. 在森林場景中，走向東邊的藍色出口（標示「往湖泊」）
2. **重要**：必須按住 **D 鍵或右方向鍵**（向東移動）進入區域
3. **預期結果**：切換到湖泊場景，角色出現在湖泊西側

#### 湖泊 → 森林

1. 在湖泊場景中，走向西邊的黃色出口（標示「回森林」）
2. **重要**：必須按住 **A 鍵或左方向鍵**（向西移動）進入區域
3. **預期結果**：回到森林場景，角色出現在森林東側

#### 森林 → 小鎮

1. 在森林場景中，走向西邊的黃色出口（標示「回小鎮」）
2. **重要**：必須按住 **A 鍵或左方向鍵**（向西移動）進入區域
3. **預期結果**：回到小鎮場景，角色出現在西城門內側

### 3. 完整路線測試

**完整往返路線：小鎮 → 森林 → 湖泊 → 森林 → 小鎮**

1. 從小鎮西城門進入森林
2. 從森林東門進入湖泊
3. 從湖泊西門回到森林
4. 從森林西門回到小鎮

## 界面功能

### 小地圖

- 右上角顯示整個小鎮的縮小版
- 紅點：玩家位置
- 黃色方框：當前可見範圍

### 狀態顯示

- 左上角顯示金錢和背包使用情況
- NPC 統計信息

### 攝影機系統

- 攝影機會自動跟隨玩家移動
- 在大地圖中平滑移動

## 除錯功能

### 顯示額外資訊

- 在森林和湖泊場景按 **D** 鍵開啟除錯模式
- 顯示動物 AI 狀態和位置資訊

### NPC 資訊

- 在小鎮按 **Tab** 鍵切換 NPC 資訊顯示
- 顯示 NPC 的職業和狀態

## 注意事項

1. **方向性移動**：場景切換需要主動向正確方向移動，只是碰觸區域不會觸發
2. **碰撞系統**：如果角色卡在建築物中，停止移動會自動回退到安全位置
3. **場景記憶**：從不同場景進入時，角色會出現在對應的入口位置

## 可能遇到的問題

### 角色卡在建築物中

- **解決方法**：停止移動，系統會自動將角色移回安全位置

### 無法切換場景

- **確認**：是否正在向正確方向移動（西 → 森林，東 → 湖泊）
- **確認**：是否完全進入了切換區域

### 攝影機不跟隨

- 這是正常的，攝影機有平滑移動機制

## 成功標準

✅ 角色可以在小鎮的所有道路上自由移動  
✅ 角色無法穿過任何建築物  
✅ 角色無法離開城牆範圍（除非通過城門）  
✅ 可以順利完成：小鎮 → 森林 → 湖泊 → 森林 → 小鎮 的完整路線  
✅ 每次場景切換後，角色都出現在正確的入口位置  
✅ 攝影機正確跟隨角色移動  
✅ 小地圖正確顯示角色位置和移動範圍

現在您可以按照這個測試說明來驗證所有功能都正常工作！
