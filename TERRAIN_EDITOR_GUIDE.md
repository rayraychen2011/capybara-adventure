# 地形地圖編輯器使用說明

## 簡介

地形地圖編輯器是一個視覺化工具，用於編輯 Cupertino 小鎮的地形地圖。支援繁體中文界面，提供直觀的編輯體驗。

## 啟動編輯器

```bash
python config/terrain_map_editor.py
```

## 主要功能

### 🎨 地形編輯

- **左鍵點擊或拖拽**：在地圖上繪製選定的地形類型
- **數字鍵 0-9**：快速選擇不同的地形類型
  - 0: 草地（淺綠色）
  - 1: 森林（深綠色）
  - 2: 水體（藍色）
  - 3: 道路（灰色）
  - 4: 高速公路（深灰色）
  - 5: 住宅區（淺黃色）
  - 6: 商業區（橘色）
  - 7: 公園設施（綠色）
  - 9: 山丘（棕色）
- **Q 鍵**：選擇鐵軌（深棕色）
- **E 鍵**：選擇火車站（深紅色）

### 🔍 視圖控制

- **滑鼠滾輪**：縮放地圖（範圍：2-50 像素/格）
- **中鍵拖拽**：移動地圖視圖
- **+/- 鍵**：鍵盤縮放（每次調整 2 像素）
- **R 鍵**：重置視圖到初始位置
- **F 鍵**：自動調整地圖適配螢幕大小

### 💾 檔案操作

- **S 鍵**：儲存當前地圖到 `config/cupertino_map_edited.csv`
- **自動載入**：啟動時自動載入上次編輯的版本
- **ESC 鍵**：離開編輯器

### 📍 資訊顯示

- **滑鼠座標**：螢幕左下角顯示當前滑鼠位置對應的地圖座標和地形類型
- **工具面板**：右側面板顯示當前選擇的地形和所有可用選項
- **狀態資訊**：顯示檔案狀態、地圖大小、縮放比例等

## 界面說明

### 主界面

- **地圖區域**：左側佔用大部分空間，顯示可編輯的地形網格
- **工具面板**：右側 200 像素寬的區域，包含地形選項和操作說明
- **狀態列**：左下角顯示滑鼠位置資訊

### 工具面板內容

1. **標題**：地形地圖編輯器
2. **當前地形**：顯示選中的地形類型和顏色
3. **地形選項**：列出所有可用地形，當前選擇會高亮顯示
4. **操作說明**：詳細的快捷鍵說明
5. **地圖資訊**：檔案狀態、地圖尺寸、縮放比例

## 檔案結構

- **輸入檔案**：`config/cupertino_map_edited.csv`（優先）或 `config/cupertino_map_100x100.csv`
- **輸出檔案**：`config/cupertino_map_edited.csv`
- **地圖格式**：100x100 的 CSV 格式，每個數字代表一種地形類型

## 使用技巧

### 高效編輯

1. **批量編輯**：按住左鍵拖拽可以連續繪製
2. **快速切換**：使用數字鍵快速切換地形類型
3. **精確定位**：使用縮放功能進行精細編輯

### 視圖管理

1. **初次使用**：按 F 鍵自動適配地圖到螢幕
2. **局部編輯**：放大到合適比例，使用拖拽查看不同區域
3. **整體預覽**：縮小查看整體布局

### 儲存策略

1. **定期儲存**：編輯過程中定期按 S 鍵儲存
2. **自動備份**：編輯器會追蹤未儲存的變更
3. **版本管理**：所有變更都儲存到編輯版本檔案

## 故障排除

### 常見問題

1. **模組匯入錯誤**：確保在專案根目錄執行
2. **字體顯示問題**：系統會自動尋找合適的繁體中文字體
3. **地圖載入失敗**：檢查 CSV 檔案是否存在且格式正確

### 效能優化

1. **大地圖編輯**：使用適當的縮放比例，避免過度放大
2. **記憶體使用**：定期儲存並重新載入可釋放記憶體
3. **響應速度**：避免在極小縮放比例下進行大量編輯

## 技術規格

- **地圖尺寸**：100x100 格
- **縮放範圍**：2-50 像素/格
- **支援格式**：CSV
- **顏色深度**：24 位元 RGB
- **字體支援**：繁體中文（自動偵測系統字體）

## 更新日誌

- **v1.0**：基本編輯功能
- **v1.1**：新增縮放和拖拽功能
- **v1.2**：優化使用者界面和操作體驗
- **v1.3**：新增滑鼠座標顯示和更多快捷鍵

## 開發資訊

- **開發語言**：Python 3.13+
- **圖形庫**：Pygame 2.6+
- **編碼**：UTF-8（支援繁體中文）
- **相容性**：Windows 10/11

---

_地形地圖編輯器是 Capybara Adventure 專案的一部分_
